build:
  gpu: false
  python_version: "3.10"
  run:
    - apt update -y && apt install -y software-properties-common python3-launchpadlib && apt update -y && add-apt-repository -y ppa:git-core/ppa && apt update -y
    - apt install -y gcc g++ aria2 git git-lfs wget libgl1 libglib2.0-0 ffmpeg cmake libgtk2.0-0
    - wget https://developer.download.nvidia.com/compute/cuda/12.3.2/local_installers/cuda_12.3.2_545.23.08_linux.run -O /content/cuda_12.3.2_545.23.08_linux.run
    - sh cuda_12.3.2_545.23.08_linux.run --silent --toolkit
    - pip install torch==2.0.1+cu118 torchvision==0.15.2+cu118 torchaudio==2.0.2+cu118 torchtext==0.15.2 torchdata==0.6.1 --extra-index-url https://download.pytorch.org/whl/cu118
    - pip install notebook pickleshare ipywidgets imageio-ffmpeg numpy==1.23.0 pandas pyngrok deepspeed==0.12.6 decord==0.6.0 transformers==4.37.0 einops timm tiktoken accelerate
    - git clone -b dev https://github.com/camenduru/MoE-LLaVA-hf /content/MoE-LLaVA-hf && cd /content/MoE-LLaVA-hf && pip install -e .
predict: "predict.py:Predictor"